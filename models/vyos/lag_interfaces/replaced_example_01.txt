# Using replaced
#
# Before state:
# -------------
#
# vyosvyos:~$ show configuration commands | grep interfaces
# set interfaces bonding bond0 hash-policy 'layer2'
# set interfaces bonding bond0 mode '802.3ad'
# set interfaces bonding bond1 hash-policy 'layer2+3'
# set interfaces bonding bond1 mode 'xor-hash'
# set interfaces ethernet eth0 address 'dhcp'
# set interfaces ethernet eth0 address 'dhcpv6'
# set interfaces ethernet eth0 hw-id '08:00:27:30:f0:22'
# set interfaces ethernet eth0 smp-affinity 'auto'
# set interfaces ethernet eth1 bond-group 'bond0'
# set interfaces ethernet eth1 hw-id '08:00:27:ea:0f:b9'
# set interfaces ethernet eth1 smp-affinity 'auto'
# set interfaces ethernet eth2 hw-id '08:00:27:c2:98:23'
# set interfaces ethernet eth2 smp-affinity 'auto'
# set interfaces ethernet eth2 bond-group 'bond1'
# set interfaces ethernet eth3 bond-group 'bond0'
# set interfaces ethernet eth3 hw-id '08:00:27:43:70:8c'
# set interfaces ethernet eth3 smp-affinity 'auto'
# set interfaces loopback lo
#
- name: Replace device configurations of listed LAGs with provided configurations
  vyos_lag_interfaces:
    config:
      - name: bond0
        mode: xor-hash
        hash-policy: layer2+3
        members: 
          - eth2
          - eth3

      - name: bond1
        mode: 802.3ad
    state: replaced

# After state:
# -------------
#
# vyos:~$ show configuration commands | grep eth
# set interfaces bonding bond0 hash-policy 'layer2+3'
# set interfaces bonding bond0 mode 'xor-hash'
# set interfaces bonding bond1 mode '802.3ad'
# set interfaces ethernet eth0 address 'dhcp'
# set interfaces ethernet eth0 address 'dhcpv6'
# set interfaces ethernet eth0 hw-id '08:00:27:30:f0:22'
# set interfaces ethernet eth0 smp-affinity 'auto'
# set interfaces ethernet eth1 hw-id '08:00:27:ea:0f:b9'
# set interfaces ethernet eth1 smp-affinity 'auto'
# set interfaces ethernet eth2 bond-group 'bond0'
# set interfaces ethernet eth2 hw-id '08:00:27:c2:98:23'
# set interfaces ethernet eth2 smp-affinity 'auto'
# set interfaces ethernet eth3 hw-id '08:00:27:43:70:8c'
# set interfaces ethernet eth3 smp-affinity 'auto'
# set interfaces ethernet eth3 bond-group 'bond0'
# set interfaces loopback lo
